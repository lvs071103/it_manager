<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/static/css/font.css">
    <link rel="stylesheet" href="/static/css/xadmin.css">
    <script type="text/javascript" src="/static/js/jquery.min.js"></script>
    <script type="text/javascript" src="/static/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/static/js/xadmin.js"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]><![endif]-->
    <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>

    <link rel="stylesheet" href="/static/sweetalert/sweetalert.css">
    <script src="/static/sweetalert/sweetalert.min.js"></script>
    <script src="/static/sweetalert/ions_alert.js"></script>
</head>

<body>
<div class="x-body">
    <form class="layui-form">

        <div class="layui-form-item">
            <label class="layui-form-label">位置</label>
            <div class="layui-input-inline" style="width:200px;">
                <label for="location">
                    <input type="text" placeholder="请输入位置" value="{{.computer.Location}}"
                           class="layui-input" id="location" name="location">
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">输入位置比如:上海办公室</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">设备类型</label>
            <div class="layui-input-inline"  style="width: 200px;">
                <label for="deviceType">
                    <select name="deviceType" id="deviceType">
                        <option value="0">--无--</option>
                        {{range .deviceTypes}}
                            <option value="{{.Id}}" {{if eq $.computer.DeviceTypes.Id .Id }}selected{{end}}>{{.DeviceType}}</option>
                        {{end}}
                    </select>
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">设备类型，比如笔记本</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">品牌</label>
            <div class="layui-input-inline"  style="width: 200px;">
                <label for="brand">
                    <select name="interest" name="brand" id="brand">
                        <option value="0">--无--</option>
                        {{range .brands}}
                            <option value="{{.Id}}" {{if eq $.computer.Brands.Id .Id}}selected{{end}}>{{.Name}}</option>
                        {{end}}
                    </select>
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">设备类型，比如笔记本</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">设备名</label>
            <div class="layui-input-inline" style="width:200px;">
                <label for="name">
                    <input type="text" placeholder="设备名称" disabled style="cursor: not-allowed"
                           value="{{.computer.Name}}" class="layui-input" id="name" name="name">
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">设备名称</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">型号</label>
            <div class="layui-input-inline" style="width:200px;">
                <label for="module">
                    <input type="text" placeholder="请输入权限名称" disabled style="cursor: not-allowed"
                           value="{{.computer.Model}}" class="layui-input" id="model" name="model">
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">型号</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">部门</label>
            <div class="layui-input-inline"  style="width: 200px;">
                <label for="dept">
                    <select name="dept" id="dept">
                        <option value="0">--无--</option>
                        {{range .groups}}
                            <option value="{{.Id}}" {{if eq $.computer.Groups.Id .Id}}selected{{end}}>{{.GroupName}}</option>
                        {{end}}
                    </select>
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">使用者所在的部门</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">资产编号</label>
            <div class="layui-input-inline" style="width:200px;">
                <label for="asset_number">
                    <input type="text" id="asset_number" name="asset_number" placeholder="资产编号"
                           disabled style="cursor: not-allowed"
                           value="{{.computer.AssetNo}}" class="layui-input">
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">资产编号这是唯一的</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">购买时间</label>
            <div class="layui-input-inline" style="width:200px;">
                <label for="purchase_date">
                    <input type="text" id="purchase_date" name="purchase_date"
                           value="{{.computer.PurchaseDate}}" disabled style="cursor: not-allowed"
                           placeholder="购买时间:Y-m-d" autocomplete="off" class="layui-input">
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">购买时间</div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">SN</label>
            <div class="layui-input-inline" style="width:200px;">
                <label for="sn">
                    <input type="text" id="sn" name="sn" value="{{.computer.SN}}"
                           disabled style="cursor: not-allowed" placeholder="产品序列号" autocomplete="off" class="layui-input">
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">序列号</div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">快速服务代码</label>
            <div class="layui-input-inline" style="width:200px;">
                <label for="quick_service_code">
                    <input type="text" id="quick_service_code" name="quick_service_code"
                           disabled style="cursor: not-allowed"
                           value="{{.computer.QuickServiceCode}}" placeholder="快速服务代码"
                           autocomplete="off" class="layui-input">
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">快速服务代码，如果没有，可留空</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">质保期</label>
            <div class="layui-input-inline" style="width:200px;">
                <label for="warranty">
                    <input type="text" id="warranty" name="warranty" disabled style="cursor: not-allowed"
                           placeholder="质保期:Y-m-d" value="{{.computer.Warranty}}" class="layui-input">
                </label>
            </div>
            <div class="layui-form-mid layui-word-aux">产品质保期，如果没有，可留空</div>
        </div>

        <div class="layui-form-item">
            <label for="L_repass" class="layui-form-label"></label>
            <button  class="layui-btn" lay-filter="add" lay-submit="" type="button">提交</button>
        </div>
    </form>
</div>
<script>
    layui.use(['form','layer'], function(){
        let form = layui.form;

        //监听提交
        form.on('submit(add)', function(){
            let location = document.getElementById("location").value;
            let deviceType = document.getElementById("deviceType").value;
            let brand = document.getElementById("brand").value;
            let name = document.getElementById("name").value;
            let model = document.getElementById("model").value;
            let dept = document.getElementById("dept").value;
            let asset_number = document.getElementById("asset_number").value;
            let purchase_date = document.getElementById("purchase_date").value;
            let sn = document.getElementById("sn").value;
            let quick_service_code = document.getElementById("quick_service_code").value;
            let warranty = document.getElementById("warranty").value;
            $.ajax({
                url:"{{urlfor "PCController.MyComputer"}}",
                type: "POST",
                data:{
                    "id": {{.computer.Id}},
                    "location": location,
                    "deviceType": deviceType,
                    "brand": brand,
                    "name": name,
                    "model": model,
                    "dept": dept,
                    "asset_number": asset_number,
                    "purchase_date": purchase_date,
                    "sn": sn,
                    "quick_service_code": quick_service_code,
                    "warranty": warranty,
                },
                success: function (data) {
                    if (data['code'] === 0){
                        ions_alert.alertSuccessToast(data['msg']);
                        setTimeout(reloadList, 1000);
                    }else{
                        ions_alert.alertErrorToast(data["msg"]);
                        setTimeout(reloadList, 1000);
                    }
                },
                error: function () {
                    ions_alert.alertErrorToast("请求失败")
                }
            })
        });
    });

    function reloadList() {
        let index = parent.layer.getFrameIndex(window.name);
        parent.layer.close(index);
        parent.location.reload()
    }
</script>
</body>

</html>